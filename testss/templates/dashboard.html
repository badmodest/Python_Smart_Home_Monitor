<!DOCTYPE html>
<html>
<head>
<title>Sensor Dashboard</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/framework7-icons/css/framework7-icons.css">
<link rel="stylesheet" href="{{ url_for('static', filename='styles/styles.css') }}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.css">
</head>

<body>
    <h1>Sensor Dashboard</h1>

    <form method="POST">
        <table>
            {% for key, value in sensor_data.items() %}
                <tr>
                    <td>{{ key }}:</td>
                    <td><input type="number" name="{{ key }}_value" value="{{ value['value'] }}"></td>
                    <td><input type="text" name="{{ key }}_unit" value="{{ value['unit'] }}"></td>
                    <td><input type="text" name="{{ key }}_icon" value="{{ value['icon'] }}"></td>
                </tr>
            {% endfor %}
            <tr>
                <td><input type="text" id="new_key" name="new_key" placeholder="New sensor name" oninput="updatePreview()"></td>
                <td><input type="number" id="new_value" placeholder="Value" oninput="updatePreview()"></td>
                <td><input type="text" id="new_unit" placeholder="Unit" oninput="updatePreview()"></td>
                <td><input type="text" id="new_icon" placeholder="Icon" oninput="updatePreview()"></td>
            </tr>
        </table>
        <button type="submit">Save Changes</button>
    </form>

    <h2>Preview of New Card:</h2>
    <div class="grid">
        <div class="card">
            <i class="f7-icons icon-in-card" id="previewIcon"></i> 
            <h3 class="text" id="previewSensorName"></h3>
            <p class="text">
                Value: <span id="previewValue"></span> <span id="previewUnit"></span>
            </p>
        </div>
    </div>
</body>

<form method="POST">
    <input type="text" name="new_key" id="new_key" placeholder="New sensor name" oninput="updatePreview()">
    <button type="submit" name="add">Add Sensor</button>
</form>

<form method="POST">
    <select name="del_key">
        {% for key in sensor_data.keys() %}
            <option value="{{ key }}">{{ key }}</option>
        {% endfor %}
    </select>
    <button type="submit" name="delete">Delete Sensor</button>
</form>

<script>

</script>

</html>

